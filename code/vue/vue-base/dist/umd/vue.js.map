{"version":3,"file":"vue.js","sources":["../../src/compiler/global-api/index.js","../../src/compiler/generate.js","../../src/compiler/parse.js","../../src/compiler/index.js","../../src/vdom/patch.js","../../src/lifecycle.js","../../src/util.js","../../src/observer/array.js","../../src/observer/index.js","../../src/state.js","../../src/init.js","../../src/vdom/index.js","../../src/index.js"],"sourcesContent":["/*\r\n * @Author: liusha\r\n * @LastModifiedBy: liusha\r\n * @LastEditTime: 2021-02-25 17:18:15\r\n * @Date: 2021-02-25 17:03:25\r\n */\r\nexport function initGlobalApi(Vue) {\r\n    Vue.mixin = function (mixin) {\r\n        console.log(mixin)\r\n    }\r\n}","/*\r\n * @Author: liusha\r\n * @LastModifiedBy: liusha\r\n * @LastEditTime: 2021-02-07 15:17:08\r\n * @Date: 2021-02-04 17:58:05\r\n */\r\n//编写： <div id='app' style='color: red'>hello {{name}}<span>hello</span></div>\r\n//结果： render(){\r\n//     return _c('div', {id: 'app', style: {color: red}}, _v('hello'+ _s(name)), _c('span', null,_v('hello')))\r\n// }\r\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;  // {{ xxx }}\r\n\r\n// 生成属性\r\nfunction genProps(attrs) {\r\n    let str = '';\r\n    for (let i = 0; i < attrs.length; i++) {\r\n        let attr = attrs[i];\r\n        if (attr.name === 'style') {\r\n            let obj = {}\r\n            attr.value.split(';').forEach(item => {\r\n                let [key, value] = item.split(':');\r\n                obj[key] = value;\r\n            })\r\n            attr.value = obj;\r\n        }\r\n        str += `${attr.name}:${JSON.stringify(attr.value)}, `;\r\n    }\r\n    let _str = str.substring(0, str.lastIndexOf(','));\r\n    return `{${_str}}`;\r\n}\r\nfunction getChildren(el) { // 生成儿子节点\r\n    const children = el.children;\r\n    if (children) {\r\n        return `${children.map(c => gen(c)).join(',')}`\r\n    } else {\r\n        return false;\r\n    }\r\n}\r\nfunction gen(node) {\r\n    if (node.type == 1) {\r\n        return generate(node);// 产生元素节点的字符串\r\n    } else {\r\n        let text = node.text;//获取文本\r\n        // 如果是普通文本 不带{{}}的\r\n        if (!defaultTagRE.test(text)) {\r\n            return `_v(${JSON.stringify(text)})`\r\n        }\r\n        let lastIndex = defaultTagRE.lastIndex = 0;//如果正则是全局模式 每次使用前置为0\r\n        let tokens = [];//存放每一段的代码\r\n        let match, index;//每次匹配到的结果\r\n\r\n        while (match = defaultTagRE.exec(text)) {\r\n            index = match.index; //保存匹配到的索引\r\n            if (index > lastIndex) {\r\n                tokens.push(JSON.stringify(text.slice(lastIndex, index)));\r\n            }\r\n            tokens.push(`_s(${match[1].trim()})`)\r\n            lastIndex = index + match[0].length;\r\n        }\r\n        if (lastIndex < text.length) {\r\n            tokens.push(JSON.stringify(text.slice(lastIndex)))\r\n        }\r\n        return `_v(${tokens.join('+')})`;\r\n    }\r\n}\r\nexport function generate(el) {\r\n    let children = getChildren(el);\r\n    let code = `_c('${el.tag}',${el.attrs.length ? `${genProps(el.attrs)}` : 'undefined'\r\n        }${children ? `,${children}` : ''})`;\r\n    return code;\r\n}","/*\r\n * @Author: liusha\r\n * @LastModifiedBy: liusha\r\n * @LastEditTime: 2021-02-04 17:56:13\r\n * @Date: 2021-02-04 17:55:39\r\n */\r\n\r\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;  //匹配标签名<aa-123>\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;//?:匹配不捕获  <my:xx\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 标签开头的正则 捕获的内容是标签名\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结尾的 </div>\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性的\r\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束的 >\r\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;  // {{ xxx }}\r\n\r\n// 数据结构 树 栈 链表 队列\r\nexport function parseHTML(html) {\r\n    function createASTElement(tagName, attrs) {\r\n        return {\r\n            tag: tagName,  //标签名\r\n            type: 1,  //元素类型是1\r\n            children: [],  //孩子列表\r\n            attrs,   //属性\r\n            parent: null //父元素\r\n        }\r\n    }\r\n    let root;  //树根\r\n    let currentParent;  //记录\r\n    let stack = [];  //判断标签是否符合预期\r\n    // 解析开始标签\r\n    function start(tagName, attrs) {\r\n        let element = createASTElement(tagName, attrs)\r\n        if (!root) {\r\n            root = element\r\n        }\r\n        currentParent = element; //当前解析的标签 保存起来\r\n        stack.push(element)  //将生成的ast元素放到栈中\r\n    }\r\n    // 解析结束标签 \r\n    function end(tagName) { //在结尾标签处 创建父子关系\r\n        let element = stack.pop(); //取出栈中最后一个\r\n        currentParent = stack[stack.length - 1]\r\n        if (currentParent) {\r\n            // 有值 就去判断是谁的父亲\r\n            // 在闭合时 可以知道这个标签的父亲是谁\r\n            element.parent = currentParent\r\n            currentParent.children.push(element)\r\n        }\r\n    }\r\n    // 标签文本\r\n    function chars(text) {\r\n        text = text.replace(/\\s/g, '');  //替换文本空字符\r\n        if (text) {\r\n            currentParent.children.push({\r\n                type: 3,  //文本是3 元素是1\r\n                text\r\n            })\r\n        }\r\n    }\r\n    while (html) {\r\n        //    只要Html不为空 就一直解析\r\n        // 当前第一个属性是不是以尖叫号开头\r\n        let textEnd = html.indexOf('<')\r\n        if (textEnd == 0) {\r\n            // 肯定是标签\r\n            const startTagMatch = parseStartTag();  //开始标签匹配的结果\r\n            if (startTagMatch) {\r\n                start(startTagMatch.tagName, startTagMatch.attrs)\r\n                continue;  //如果匹配到了开始标签 就结束走下一步\r\n            }\r\n            const endTagMatch = html.match(endTag)\r\n            // 匹配到了结束标签\r\n            if (endTagMatch) {\r\n                advance(endTagMatch[0].length)\r\n                end(endTagMatch[1]);  //将结束标签传入\r\n                continue;\r\n            }\r\n        }\r\n        // 表示是个文本 \r\n        let text;\r\n        if (textEnd >= 0) {\r\n            text = html.substring(0, textEnd)\r\n        }\r\n        if (text) {\r\n            advance(text.length)\r\n            chars(text)\r\n        }\r\n    }\r\n    // 前进\r\n    function advance(n) {  //将字符串进行截取操作 再更新Html内容\r\n        html = html.substring(n)\r\n    }\r\n    // 解析开始标签\r\n    function parseStartTag() {\r\n        // 匹配标签开头的正则\r\n        let start = html.match(startTagOpen)  ////{0: \"<div\" 1: \"div\"}\r\n        if (start) {\r\n            // 制作结构  0是匹配字符串 1 是匹配分组(标签名)\r\n            const match = {\r\n                tagName: start[1],\r\n                attrs: []\r\n            }\r\n            advance(start[0].length)// 删除开始标签  此时的html id=\"app\"> <div id=\"my\">hello{{name}}<span>xixi</span></div></div>\r\n            // 如果直接是闭合标签 说明没有属性\r\n            let end;\r\n            let attr;\r\n            // 不是结尾标签且能匹配到属性\r\n            while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\r\n                match.attrs.push({ name: attr[1], value: attr[3] || attr[4] || attr[5] })  ////match.attrs输出 [0: name: \"id\" value: \"app\"]\r\n                advance(attr[0].length); //去掉当前属性\r\n            }\r\n            if (end) {\r\n                //去掉>\r\n                advance(end[0].length)\r\n                return match;\r\n            }\r\n        }\r\n    }\r\n    return root;\r\n}","/*\r\n * @Author: liusha\r\n * @LastModifiedBy: liusha\r\n * @LastEditTime: 2021-02-07 15:17:28\r\n * @Date: 2021-02-04 14:49:36\r\n */\r\n/* <div id='my'>hello{{name}}<span>xixi</span></div> */\r\n// {\r\n//     tag: 'div',\r\n//     parent: null,\r\n//     type: 1,\r\n//     attrs: [],  //属性\r\n//     children: [{tag: null, parent: 父div, attrs: [],text: hello{{name}}},{tag: 'span',parent: 父div, attrs:[],text: 'xixi'}]\r\n// }\r\n\r\nimport { generate } from \"./generate\"\r\nimport { parseHTML } from \"./parse\"\r\nexport function compileToFunctions(template) {\r\n    //html模板-》render函数\r\n    //ast语法树\r\n    //虚拟dom 是用对象来描述节点的\r\n    // ast是对语法转义 虚拟dom是对结构转义 \r\n    // 1 需要将html代码转化成为‘ast'语法树 可以用ast树来描述语言本身\r\n    // 启前端必须要掌握的数据结构（树）\r\n    let ast = parseHTML(template)\r\n    // 2 优化静态节点\r\n    // 3 通过这棵树 重新生成代码\r\n    let code = generate(ast)\r\n    // 4  将字符串转成函数\r\n    // 限制取值范围 通过with来进行取值 稍后调用render函数就可以通过改变this 让这个函数内部取到结果\r\n    // let render = `with(this){return ${code}}`;\r\n    console.log(code)\r\n    let renderFn = new Function(code);\r\n    console.log(renderFn)\r\n    return renderFn\r\n    // let obj = { a: 1, b: 2 }\r\n    // with (obj) {\r\n    //     console.log(a, b)//输出1 2\r\n    // }\r\n\r\n}","/*\r\n * @Author: liusha\r\n * @LastModifiedBy: liusha\r\n * @LastEditTime: 2021-02-07 18:03:49\r\n * @Date: 2021-02-07 17:01:21\r\n */\r\n\r\nexport function patch(oldVnode, vnode) {\r\n    //   将虚拟节点转化成真实节点\r\n    //   创建一个元素\r\n\r\n    let el = createElm(vnode);  //产生真实的dom\r\n    let parentElm = oldVnode.parentNode; // 获取老的app的父亲=》body\r\n    parentElm.insertBefore(el, oldVnode, nextSibling); //当前的真实元素插入到app的后面\r\n    parentElm.removeChild(oldVnode); // 删除老的节点\r\n}\r\nfunction createElm(vnode) {\r\n    let { tag, children, key, data, text } = vnode;\r\n    if (typeof tag == 'string') {\r\n        vnode.el = document.createElement(tag);\r\n        children.forEach(child => {\r\n            vnode.el.appendChild(createElm(child))\r\n        });\r\n    } else {\r\n        // 创建文件 放到vnode.el上\r\n        vnode.el = document.createTextNode(text)\r\n    }\r\n    return vnode.el;\r\n}\r\n// vue 的渲染流程=》 先初始化数据=》将模板进行编译 =》 render函数=-》生成虚拟节点=》生成真实的dom=>放到页面","/*\r\n * @Author: liusha\r\n * @LastModifiedBy: liusha\r\n * @LastEditTime: 2021-02-07 17:08:01\r\n * @Date: 2021-02-07 15:27:03\r\n */\r\nimport { patch } from \"./vdom/patch\";\r\nexport function lifecycleMixin(Vue) {\r\n    Vue.prototype._update = function (vnode) {\r\n        const vm = this;\r\n        patch(vm, $el, vnode)\r\n    }\r\n}\r\nexport function mountComponent(vm, el) {\r\n    // 调用render方法去渲染 el属性\r\n    //先调用render方法 创建虚拟节点 再将虚拟节点渲染到页面上\r\n    // vm.update()是将虚拟节点变成真实节点\r\n    vm._update(vm._render());\r\n}","\r\nexport function proxy(vm, data, key) {\r\n    Object.defineProperty(vm, key, {\r\n        get() {\r\n            return vm[data][key]; // vm._Data.a\r\n        },\r\n        set(newValue) {\r\n            vm[data][key] = newValue\r\n        }\r\n    })\r\n}\r\nexport function defineProperty(target, key, value) {\r\n    Object.defineProperty(target, key, {\r\n        enumerable: false,\r\n        configurable: false,\r\n        value\r\n    });\r\n}","/*\r\n * @Author: liusha\r\n * @LastModifiedBy: liusha\r\n * @LastEditTime: 2021-02-03 17:19:03\r\n * @Date: 2021-02-02 18:07:12\r\n */\r\n// 拿到数组原型上的方法（原来的方法）\r\nlet oldArrayProtoMethods = Array.prototype;\r\n// 继承一下  相当于 arrayMethods.__proto__ = oldArrayProtoMethods\r\nexport let arrayMethods = Object.create(oldArrayProtoMethods);\r\nlet methods = [\r\n    'push',\r\n    'pop',\r\n    'shift',\r\n    'unshift',\r\n    'reverse',\r\n    'sort',\r\n    'splice'\r\n];\r\nmethods.forEach(method => {\r\n    arrayMethods[method] = function (...args) {\r\n        const result = oldArrayProtoMethods[method].apply(this, args);\r\n        const ob = this.__ob__;// 这个this指向value\r\n        // 有可能数组中有对象\r\n        let inserted;\r\n        switch (method) {\r\n            case 'push'://arr.push({a: 1}, {b:2})\r\n            case 'unshift'://这两个方法都是追加的意思 追加的内容可能是对象类型 应该再次进行劫持 \r\n                inserted = args;\r\n                break;\r\n            case 'splice':\r\n                inserted = args.slice(2)\r\n            default:\r\n                break;\r\n        }\r\n        if (inserted) ob.observeArray(inserted); // 对新增的每一项进行观测\r\n        return result\r\n    }\r\n})","\r\nimport { defineProperty } from '../util.js';\r\nimport { arrayMethods } from './array'\r\nclass Observer {\r\n    constructor(value) {\r\n        // 使用defineProperty重新定义属性\r\n        // 判断一个对象是否被观测过 看他有没有__ob__这个属性\r\n        defineProperty(value, '__ob__', this)\r\n        if (Array.isArray(value)) {\r\n            // 我希望调用push shift unshift splice sort reberse pop\r\n            // 这种叫做函数劫持  切片编程\r\n            value.__proto__ = arrayMethods; // 重写数组原型方法\r\n            // 观测数组中的对象类型 对象变化也要做一些事\r\n            this.observeArray(value);\r\n        } else {\r\n            this.walk(value);\r\n        }\r\n    }\r\n    observeArray(value) {\r\n        for (let i = 0; i < value.length; i++) {\r\n            observe(value[i]);\r\n        }\r\n    }\r\n    walk(data) {\r\n        let keys = Object.keys(data); //H获取对象的Key\r\n        keys.forEach((key) => {\r\n            defineReactive(data, key, data[key]);  //Vue.util.defineReactive;\r\n        })\r\n    }\r\n}\r\nfunction defineReactive(data, key, value) {\r\n    observe(value)\r\n    Object.defineProperty(data, key, {\r\n        get() {\r\n            console.log('获取值')\r\n            return value\r\n        },\r\n        set(newValue) {\r\n            if (newValue == value) return;\r\n            observe(newValue)   // 如果用户将值改为对象继续监控\r\n            value = newValue\r\n            console.log('设置值')\r\n        }\r\n    })\r\n}\r\nexport function observe(data) {\r\n    // typeof null 也是Object\r\n    // 不能不是对象 并且不是null\r\n    if (typeof data !== 'object' || data == null) {\r\n        return;\r\n    }\r\n    if (data.__ob__) {\r\n        return data;\r\n    }\r\n    return new Observer(data)\r\n}","import { observe } from \"./observer/index\";\r\nimport { proxy } from \"./util.js\";\r\n\r\n/*\r\n * @Author: liusha\r\n * @LastModifiedBy: liusha\r\n * @LastEditTime: 2021-02-03 17:41:23\r\n * @Date: 2021-02-01 15:33:01\r\n */\r\nexport function initState(vm) {  //vm.$options\r\n    const opts = vm.$options;\r\n    if (opts.props) {\r\n        initProps(vm)\r\n    };\r\n    if (opts.methods) {\r\n        initMethods(vm)\r\n    };\r\n    if (opts.data) {\r\n        initData(vm)\r\n    };\r\n    if (opts.computed) {\r\n        initComputed(vm)\r\n    };\r\n    if (opts.watch) {\r\n        initWatch(vm)\r\n    };\r\n}\r\nfunction initProps(vm) { }\r\nfunction initMethods(vm) { }\r\n\r\nfunction initData(vm) {\r\n    // 数据的初始化操作\r\n    let data = vm.$options.data;\r\n    // 为什么要call 因为data在new Vue中，属于Vue的，先在这里把它指向Vue\r\n    data = vm._data = typeof data == 'function' ? data.call(vm) : data\r\n    // 数据的劫持方案  对象Object.defineProperty\r\n    // 数组 是单独处理\r\n\r\n    // 当我去vm上取属性时 帮我将属性的取值代理到vm._data上\r\n    for (let key in data) {\r\n        proxy(vm, '_data', key)\r\n    }\r\n\r\n    observe(data)\r\n}\r\nfunction initComputed(vm) { }\r\nfunction initWatch(vm) { }","import { compileToFunctions } from \"./compiler/index\";\r\nimport { mountComponent } from \"./lifecycle\";\r\nimport { initState } from \"./state\";\r\n\r\nexport function initMixin(Vue) {\r\n    Vue.prototype._init = function (options) {\r\n        const vm = this;\r\n        vm.$options = options\r\n\r\n        // 初始化状态(将数据做一个初始化的劫持  当我改变数据是应该更新视图)\r\n        // vue组件中有很多状态 data  props watch cpmputed\r\n        initState(vm)   //初始化状态\r\n\r\n        // vue里面核心特性 响应式数据原理\r\n        // vue是一个什么框架 参考mvvm框架  不是mvvm框架  ，vue可以参考dom $ref \r\n        // mvvM不能跳过数据去更新视图\r\n\r\n        //如果当前有el属性说明要渲染模板\r\n        if (vm.$options.el) {\r\n            vm.$mount(vm.$options.el)\r\n        }\r\n    }\r\n    Vue.prototype.$mount = function (el) {\r\n        //挂载操作\r\n        const vm = this;\r\n        const options = vm.$options;\r\n        el = document.querySelector(el);\r\n        vm.$el = el;  //存好el\r\n        // 先判断有没有render 没有就查找有没有emplate  没有temelate就查找有没有外部的html 赋值给template ,然后用template去生成一个render函数 \r\n        // 且赋值给render\r\n        if (!options.render) {\r\n            //没有render 将template转成render方法\r\n            let template = options.template\r\n            if (!template && el) {\r\n                template = el.outerHTML;  //outerHTML代表外层div iner代表里层\r\n            }\r\n            // 编译原理 将模板编译成render函数\r\n            const render = compileToFunctions(template);\r\n            options.render = render\r\n        }\r\n        //渲染时用的都是这个render方法\r\n        // 需要挂载这个组件\r\n        mountComponent(vm, el);\r\n\r\n    }\r\n} ","/*\r\n * @Author: liusha\r\n * @LastModifiedBy: liusha\r\n * @LastEditTime: 2021-02-07 16:57:11\r\n * @Date: 2021-02-07 15:36:05\r\n */\r\n\r\nexport function renderMixin(Vue) { // 用对象来描述dom的结构\r\n    Vue.prototype._c = function () {\r\n        // 创建虚拟dom元素\r\n        return createElement(...arguments)\r\n    }\r\n    Vue.prototype._s = function (val) {// stringify\r\n        return val == null ? '' : (typeof val == 'object') ? JSON.stringify(val) : val;\r\n    }\r\n    Vue.prototype._v = function (text) {//创建虚拟dom文本元素\r\n        return createTextVnode(text);\r\n    }\r\n    Vue.prototype._render = function () {\r\n        const vm = this;\r\n        const render = vm.$options.render;\r\n        console.log(render)\r\n        let vnode = render.call(vm);\r\n        return vnode;\r\n    }\r\n}\r\nfunction createElement(tag, data = {}, ...children) {\r\n    return vnode(tag, data, data.key, children)\r\n}\r\nfunction createTextVnode(text) {\r\n    return vnode(undefined, undefined, undefined, undefined, text)\r\n    console.log(text)\r\n}\r\n// 产生虚拟dom的\r\nfunction vnode(tag, data, key, children, text) {\r\n    return {\r\n        tag,\r\n        data,\r\n        key,\r\n        children,\r\n        text\r\n    }\r\n}","/*\r\n * @Author: liusha\r\n * @LastModifiedBy: liusha\r\n * @LastEditTime: 2021-02-25 17:17:58\r\n * @Date: 2021-02-01 15:08:08\r\n */\r\n\r\nimport { initGlobalApi } from \"./compiler/global-api/index\";\r\nimport { initMixin } from \"./init\";\r\nimport { lifecycleMixin } from \"./lifecycle\";\r\nimport { renderMixin } from \"./vdom/index\";\r\n\r\n// 为什么不用类 \r\nfunction Vue(options) {\r\n    this._init(options); //入口方法 做初始化操作\r\n}\r\n// 写成一个个的插件对原型的扩展\r\ninitMixin(Vue)\r\nlifecycleMixin(Vue);  //混合生命周期 渲染\r\nrenderMixin(Vue); //渲染\r\n\r\n\r\n// 静态方法 vue.component vue.directive vue.extend vue.minin....\r\ninitGlobalApi(Vue)\r\nexport default Vue;"],"names":["initGlobalApi","Vue","mixin","console","log","defaultTagRE","genProps","attrs","str","i","length","attr","name","obj","value","split","forEach","item","key","JSON","stringify","_str","substring","lastIndexOf","getChildren","el","children","map","c","gen","join","node","type","generate","text","test","lastIndex","tokens","match","index","exec","push","slice","trim","code","tag","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parseHTML","html","createASTElement","tagName","parent","root","currentParent","stack","start","element","end","pop","chars","replace","textEnd","indexOf","startTagMatch","parseStartTag","endTagMatch","advance","n","compileToFunctions","template","ast","renderFn","Function","patch","oldVnode","vnode","createElm","parentElm","parentNode","insertBefore","nextSibling","removeChild","data","document","createElement","child","appendChild","createTextNode","lifecycleMixin","prototype","_update","vm","$el","mountComponent","_render","proxy","Object","defineProperty","get","set","newValue","target","enumerable","configurable","oldArrayProtoMethods","Array","arrayMethods","create","methods","method","args","result","apply","ob","__ob__","inserted","observeArray","Observer","isArray","__proto__","walk","observe","keys","defineReactive","initState","opts","$options","props","initData","computed","watch","_data","call","initMixin","_init","options","$mount","querySelector","render","outerHTML","renderMixin","_c","arguments","_s","val","_v","createTextVnode","undefined"],"mappings":"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"}